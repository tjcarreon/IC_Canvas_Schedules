(this.webpackJsonpic_cse_schedule=this.webpackJsonpic_cse_schedule||[]).push([[0],{13:function(t,e,a){},14:function(t,e,a){},15:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),r=a(7),i=a.n(r),l=(a(13),a(5)),c=a(1),o=a(2),u=a(4),p=a(3),h=(a(14),function(t){Object(u.a)(a,t);var e=Object(p.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).checkForAlarm=function(){if(s.props.active&&s.props.alarmOn){var t=new Date;t.getHours()!==s.state.hour&&t.getMinutes()!==s.state.minute||s.setState({ringing:!0})}},s.state={ringing:!1},s}return Object(o.a)(a,[{key:"constructTask",value:function(){var t=[];t.push(n.a.createElement("div",{key:0,className:"t_time"},this.props.task[1]));for(var e=2;e<this.props.task.length;e++){var a=this.props.task[e];if(a.includes("->")){var s=a.split("->");t.push(n.a.createElement("a",{key:e,target:"blank",href:s[1]},s[0]))}else t.push(n.a.createElement("div",{key:e,className:"t_note"},a))}var r=[];return r.push(n.a.createElement("div",{key:1234,className:"t_title"},this.props.task[0])),r.push(n.a.createElement("div",{key:1235,className:"t_detail"},t)),this.state.ringing&&clearInterval(this.state.alarmId),r}},{key:"getColorfromString",value:function(t){for(var e=0,a=0;a<t.length;a++)e+=t.charCodeAt(a)*Math.pow(10,a);return"rgb("+e%255+","+e/1e3%255+","+e/1e6%255+")"}},{key:"oppGetColorfromString",value:function(t){var e=this.getColorfromString(t).split("(")[1].split(")")[0].split(",");return"rgb("+Math.abs(255-parseFloat(e[0]))+","+Math.abs(255-parseFloat(e[1]))+","+Math.abs(255-parseFloat(e[2]))+")"}},{key:"componentDidMount",value:function(){var t=parseInt(this.props.task[1].split(":")[0]),e=parseInt(this.props.task[1].split(":")[1]);this.setState({hour:t,minute:e})}},{key:"render",value:function(){return n.a.createElement("div",{className:"Task",style:{backgroundColor:this.getColorfromString(this.props.task[0]),color:this.oppGetColorfromString(this.props.task[0].split().reverse().join())}},this.constructTask())}}]),a}(s.Component)),v=function(t){Object(u.a)(a,t);var e=Object(p.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).state={class:""},s}return Object(o.a)(a,[{key:"constructHours",value:function(){for(var t=[],e=[],a=0;a<this.props.tasks.length;a++){var s=this.props.tasks[a][1].split("-")[0].trim().split(":"),r=60*parseInt(s[0])+parseInt(s[1]);e.push(r)}for(var i=0;i<this.props.tasks.length;i++){var l=this.getMinIndex(e),c=this.props.tasks[l];t.push(n.a.createElement(h,{key:i,task:c,active:this.props.active,alarmOn:this.props.alarmOn})),e[l]=1440}return t}},{key:"getMinIndex",value:function(t){for(var e=0,a=0;a<t.length;a++)t[e]>t[a]&&(e=a);return e}},{key:"getClassName",value:function(){return this.props.active?"active":""}},{key:"render",value:function(){return n.a.createElement("div",{className:"Hour "+this.getClassName()},this.constructHours())}}]),a}(s.Component),m=function(t){Object(u.a)(a,t);var e=Object(p.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).updateHours=function(){if(s.props.active){for(var t=[],e=0;e<24;e++)t[e]=!1;t[(new Date).getHours()]=!0,s.setState({active:t})}},s.state={active:[],hourTasks:[]},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){for(var t=[],e=0;e<24;e++)t[e]=!1;this.setState({active:t}),this.updateHours(),setInterval(this.updateHours,5e3)}},{key:"constructHours",value:function(){if(0!==this.state.active.length){for(var t=[],e=0;e<13;e++)t.push([]);var a,s=Object(l.a)(this.props.tasks);try{for(s.s();!(a=s.n()).done;){var r=a.value;try{t[r[1].split("-")[0].split(":")[0]-9].push(r)}catch(o){console.log(o)}}}catch(u){s.e(u)}finally{s.f()}var i=[];i.push(n.a.createElement("div",{key:0,className:"d_title"},n.a.createElement("div",null,this.props.title)));for(var c=9;c<21;c++)i.push(n.a.createElement(v,{key:c,active:this.state.active[c],hour:c,tasks:t[c-9]}));return i}}},{key:"render",value:function(){return n.a.createElement("div",{className:"Day"},this.constructHours())}}]),a}(s.Component),d=function(t){Object(u.a)(a,t);var e=Object(p.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).parseTextFileAndUpdate=function(t){if(t.includes("<!DOCTYPE html>"))return console.log("Cannot find schedule"),void s.parseTextFileAndUpdate("Cannot find schedule");if(t){var e=t.split("\n");0!==e.length&&""!==e[0]||(console.log("First line (title) is empty"),e[0]="Empty Title");for(var a=[],n=1;n<e.length;n++){var r=e[n].trim();r.includes("#")||""!==r&&a.push(e[n].trim())}s.setState({title:e[0],taskList:a},(function(){s.updateTasks()}))}else console.log("Got an empty file")},s.updateTasks=function(){var t=new Map;t.set("Mon",0),t.set("Tue",1),t.set("Wed",2),t.set("Thu",3),t.set("Fri",4),t.set("Sat",5),t.set("Sun",6);for(var e=[],a=0;a<7;a++)e.push([]);var n,r=Object(l.a)(s.state.taskList);try{var i=function(){var a=n.value,s=[];if(a.split("|").forEach((function(t){""!==(t=t.trim())&&s.push(t)})),s.length<2)return"continue";var r,i=s[1].split(","),c=Object(l.a)(i);try{for(c.s();!(r=c.n()).done;){var o=r.value,u=o.trim().split(" ");if(u.length<=1)console.log("skipping time of day",o,s);else{var p=u[u.length-1];u.splice(u.length-1,1);var h,v=Object(l.a)(u);try{for(v.s();!(h=v.n()).done;){var m=h.value;if(t.has(m)){var d=[];d.push(s[0]),d.push(p);for(var f=2;f<s.length;f++)d.push(s[f]);e[t.get(m)].push(d)}}}catch(k){v.e(k)}finally{v.f()}}}}catch(k){c.e(k)}finally{c.f()}};for(r.s();!(n=r.n()).done;)i()}catch(c){r.e(c)}finally{r.f()}s.setState({allTasks:e})},s.UpdateDay=function(){for(var t=[],e=((new Date).getDay()+6)%7,a=0;a<7;a++)t[a]=a===e;s.setState({active:t})},s.state={allTasks:[],active:[],title:"",taskList:[]},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.getUrlVars();e.page||(e.page="template"),this.UpdateDay(),setInterval(this.UpdateDay,1e6),fetch("../schedules/"+e.page+".txt").then((function(t){return t.text()})).then((function(e){return t.parseTextFileAndUpdate(e)})).catch((function(a){console.log("Cannot find "+e.page+" in schedules folder: "),console.log(a),t.parseTextFileAndUpdate("Cannot find schedule")}))}},{key:"getUrlVars",value:function(){var t={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,a,s){t[a]=s})),t}},{key:"constructDays",value:function(){if(0!==this.state.allTasks.length)return n.a.createElement("div",null,n.a.createElement("div",{id:"title"},this.state.title),n.a.createElement("div",{id:"timeAxis"},n.a.createElement("div",null,"9am"),n.a.createElement("div",null,"10am"),n.a.createElement("div",null,"11am"),n.a.createElement("div",null,"12pm"),n.a.createElement("div",null,"1pm"),n.a.createElement("div",null,"2pm"),n.a.createElement("div",null,"3pm"),n.a.createElement("div",null,"4pm"),n.a.createElement("div",null,"5pm"),n.a.createElement("div",null,"6pm"),n.a.createElement("div",null,"7pm"),n.a.createElement("div",null,"8pm")),n.a.createElement(m,{title:"Monday",tasks:this.state.allTasks[0],active:this.state.active[0]}),n.a.createElement(m,{title:"Tuesday",tasks:this.state.allTasks[1],active:this.state.active[1]}),n.a.createElement(m,{title:"Wednesday",tasks:this.state.allTasks[2],active:this.state.active[2]}),n.a.createElement(m,{title:"Thursday",tasks:this.state.allTasks[3],active:this.state.active[3]}),n.a.createElement(m,{title:"Friday",tasks:this.state.allTasks[4],active:this.state.active[4]}),n.a.createElement(m,{title:"Saturday",tasks:this.state.allTasks[5],active:this.state.active[5]}),n.a.createElement(m,{title:"Sunday",tasks:this.state.allTasks[6],active:this.state.active[6]}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},this.constructDays())}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e,a){t.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.2ade3ef8.chunk.js.map